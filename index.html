<!DOCTYPE html>
<html>
	<head>
		<title>Diffbot HUB</title>
	</head>

	<body>
		<div style="max-width: 600px; margin:auto;">
			<center><h1>Diffbot HUB</h1></center>
			<input placeholder="URL" style="width: 100%;margin-bottom:15px;" id="diffbotUrl" autofocus />
			<button id="analyze">Analyze</button>
			<button id="article">Article</button>
			<button id="product">Product</button>
			<button id="render">Render</button>
			<input placeholder="Extra fields (mentos, ...)" style="width: 100%;margin-top:15px;margin-bottom:15px;" id="extrafields" />
			<h3>Options:</h3>
			<input type="checkbox" checked="true" id="newtab" /> <label for="newtab">Open in a new tab</label><br>
			<input type="checkbox" id="sourcetab" /> <label for="sourcetab">Open source page</label><br>
		</div>
		<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
		<script>

function callOnUrl(apiUrl) {

	var v = $("#diffbotUrl").val();
	var encodedSource = encodeURIComponent(v);

	var url = apiUrl + encodedSource;

	var extra = $("#extrafields").val();
	if (extra.length > 0)
		url += "&" + extra;


	if ($("#sourcetab").is(":checked"))
		window.open(v, '_blank');

	if ($("#newtab").is(":checked"))
		window.open(url, '_blank');
	else
		document.location = url
}

$("#analyze").click(function() {
	callOnUrl("http://api.diffbot.com/v3/analyze?token={{.Token}}&admin&stats&url=");

});
$("#article").click(function() {
	callOnUrl("http://api.diffbot.com/v3/article?token={{.Token}}&admin&stats&url=");

});
$("#product").click(function() {
	callOnUrl("http://api.diffbot.com/v3/product?token={{.Token}}&admin&stats&url=");

});
$("#render").click(function() {
	callOnUrl("http://render.diffbot.com:14627/rendered2.html?url=");
});

		</script>
	</body>
</html>
